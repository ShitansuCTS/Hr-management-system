generator client {
  provider = "prisma-client-js"
  output   = "../src/lib/generated/prisma"
  binaryTargets = ["native", "rhel-openssl-3.0.x"]
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

///////////////////////////
// ENUMS
///////////////////////////

enum Role {
  ADMIN
  EMPLOYEE
}

enum UserStatus {
  ACTIVE
  INACTIVE
}

enum Gender {
  MALE
  FEMALE
  OTHER
}

enum EmploymentType {
  FULL_TIME
  PART_TIME
  CONTRACT
  INTERN
}

///////////////////////////
// ORGANIZATION
///////////////////////////

model Organization {
  id        String   @id @default(uuid())
  name      String
  domain    String?   // optional, e.g., company email domain
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt

  users     User[]   // 1:N relation to Users
}

///////////////////////////
// USER
///////////////////////////

model User {
  id            String      @id @default(uuid())

  // =========================
  // Login & Auth
  // =========================
  email         String      @unique
  password      String
  role          Role
  status        UserStatus  @default(ACTIVE)
  lastLoginAt   DateTime?

  // =========================
  // Employee Core Details
  // =========================
  employeeId    String          // given by HR
  fullName      String
  phone         String
  designation   String
  department    String?
  employmentType EmploymentType?
  workLocation  String?
  dateOfJoining DateTime

  // =========================
  // Personal Details
  // =========================
  profileImageUrl String?
  gender          Gender?
  dateOfBirth     DateTime?
  fatherName      String?
  motherName      String?

  // =========================
  // Address Details
  // =========================
  currentAddress    String?
  permanentAddress  String?
  city              String?
  state             String?
  country           String?
  pincode           String?

  // =========================
  // Emergency Contact
  // =========================
  emergencyContactName     String?
  emergencyContactPhone    String?
  emergencyContactRelation String?

  // =========================
  // Reporting Manager (Simple)
  // =========================
  reportingManagerName String?

  // =========================
  // Organization Relation
  // =========================
  organization   Organization @relation(fields: [organizationId], references: [id])
  organizationId String

  // =========================
  // System & Safety
  // =========================
  isDeleted     Boolean   @default(false)
  deletedAt     DateTime?

  createdAt     DateTime  @default(now())
  updatedAt     DateTime  @updatedAt

  @@unique([employeeId, organizationId])
}


